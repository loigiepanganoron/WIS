 
<script> 
   
    function selectrow() { 
            var selection = this.select();
            var rowData = this.dataItem(selection);
            var id = rowData.preparation_id;
            var cn = rowData.controlno;  
            view_approved(cn)  
    }
    function return_deleted(e) {
       // e.preventDefault();
        var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
        var id = dataItem.id;
        var cn = dataItem.controlno;
        var officeid = dataItem.officeid;

        swal({ title: "Undo?", text: "", type: "warning", showCancelButton: true, confirmButtonColor: "#DD6B55", confirmButtonText: "Yes", showLoaderOnConfirm: true, closeOnConfirm: false }, function (isConfirm) {
            if (isConfirm) { 
                $.ajax({
                    url: "@Url.Content("~/Responsive/undo")",
                    data:{"controlno":cn,"id":id},
                type: 'POST',
                success: function (result) {
                    if (result == "1") {
                        $(".sweet-overlay, .sweet-alert").remove();
                        swal('', 'Updated..', 'success'); 
                        $('#prepared_ris').data('kendoGrid').dataSource.read({"controlno":cn})

                        $.get("@Url.Content("~/Responsive/check_if_edited")", {"controlno":cn,"officeid":officeid}, function (data) { 
                            if(data[0].agree)
                            { 
                                $('#appbtn').show(); 
                                $('#consentbtn').hide();
                                $('#controlno_print').show();  
                            }
                            else
                            { 
                                if(data[0].edited == false && data[0].agree == false && data[0].deleted == false)
                                {
                                    $('#appbtn').show(); 
                                    $('#consentbtn').hide();
                                    $('#controlno_print').show();  
                                }
                                else
                                {
                                    $('#appbtn').hide(); 
                                    $('#consentbtn').show();
                                    $('#controlno_print').hide();  
                                }
                            }
                        }) 
                    }
                    else {
                        $(".sweet-overlay, .sweet-alert").remove();
                        swal('', 'Opps '+result, 'error');
                    }
                }
            });
            }
            else {
                $(".sweet-overlay, .sweet-alert").remove();
            }
        }); 
    }
    function onRequestEnd(e) {
        //Check request type 
        if (e.type == "create" || e.type == "update" || e.type == "destroy") {
            //check for errors in the response
            if (e.response == null || e.response.Errors == null) {
                var code = $('#cn').text();
                $('#prepared_ris').data("kendoGrid").dataSource.read({controlno:code});
                $('#appbtn').hide();
                $('#consentbtn').show();
                $('#controlno_print').hide(); 
            }
        }
        else
        {
            e.preventDefault(); 
        }
    }
    function print(controlno)
    { 
        if(controlno)
        {
            window.open("@Url.Content("~/Reports/print_ris.aspx?repID=")" + 3 + "&controlno=" + controlno);
        }
        else
        {
            var cn = $('#cn').text(); 
            window.open("@Url.Content("~/Reports/print_ris.aspx?repID=")" + 3 + "&controlno=" + cn);
        }
        //window.open("~/Reports/print_ris.aspx?repID="+3,"&controlno="+controlno);
    }
    function check_to_be_deleted(e) {
        var grid = $("#prepared_ris").data("kendoGrid");
        var gridData = grid.dataSource.view();

        for (var i = 0; i < gridData.length; i++) {
            if (gridData[i].to_be_deleted == true) 
            { 
                grid.table.find("tr[data-uid='" + gridData[i].uid + "']").addClass("deleted"); 
            }
            else  
            {
                var currenRow = grid.table.find("tr[data-uid='" +gridData[i].uid+ "']");
                var editButton = $(currenRow).find(".k-grid-Undo");
                editButton.hide();
                //grid.table.find("tr[data-uid='" + gridData[i].uid + "']").addClass("hapitna");
            }
        }
    }
    
    function check(e) {
        if(e==1)
        {
            document.getElementById("office_search").checked = true;
            document.getElementById("controller_search").checked = false;
        }
        else
        {
            document.getElementById("office_search").checked = false;
            document.getElementById("controller_search").checked = true;
        }
    }

    function acheck(e) {
        if(e==1)
        {
            document.getElementById("a_office_search").checked = true;
            document.getElementById("a_controller_search").checked = false;
        }
        else
        {
            document.getElementById("a_office_search").checked = false;
            document.getElementById("a_controller_search").checked = true;
        }
    }
</script>


<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row wrapper border-bottom white-bg page-heading">
        <div class="col-lg-10">
            <h2>RIS Approval</h2> 
        </div>

        <div class="col-lg-2">

        </div>
    </div>
    <div class="row wrapper wrapper-content">

        <div class="col-lg-6">
            <div class="col-lg-12   ibox">
                <div class="ibox-title">
                    <h5> Submitted RIS </h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>

                <div class="ibox-content" style="display:block">
                    <div class="row">

                        <section class="col-lg-12 col-md-12 col-sm-12"> 
                            <label><input type="radio" id="office_search" onclick="check(1)" /> Search by Office </label>
                            <label><input type="radio" id="controller_search" onclick="check(2)" checked="checked" /> Search by Control # </label>
                            <input placeholder="Find " id="search_submitted_ris" type="text" style="width:100%;height:35px">
                        </section>
                        <br>

                        <section class="col-lg-12 col-sm-12 col-md-12">
                            <div> 
                                <script type="text/x-kendo-tmpl" id="list_submitted_ris">
                                    <div class="feed-element lv " style="height:auto;width:45%" onmouseover="this.style.background = 'rgb(241,241,241)'" onmouseout="this.style.background = ''">
                                        <div class="media-body col-lg-12 col-md-12 col-sm-12">
                                            <span style="width:100%">
                                                <small>#:officename#</small>  
                                            </span>
                                            <div style="width:100%">
                                                <h3>#:controlno#</h3>
                                            </div>
                                            <div style="width:100%">
                                                <button style="width:20%" class="btn btn-info btn-xs responsive-width" type="button" onclick="show_submitted_items('#:controlno#','#:officeid#')">&nbsp;View</button>
                                                <button style="width:25%" class="btn btn-info btn-xs responsive-width" type="button" onclick="remove_ris('#:controlno#','#:officeid#')">&nbsp;Delete</button>
                                            </div>
                                            <div style="width:100%">
                                                <p class="text-muted">#= kendo.toString(kendo.parseDate(date_time, 'yyyy-MM-dd h:mm tt'), 'MM/dd/yyyy h:mm tt') #</p>
                                            </div>
                                        </div>
                                    </div>
                                </script>

                                @(Html.Kendo().ListView<IMS.Models.item>()
                        .Name("submitted_ris")
                        .TagName("div")
                        .ClientTemplateId("list_submitted_ris")
                        .AutoBind(true)
                                        //.Navigatable()
                        .Pageable()
                        .HtmlAttributes(new { style = "height:100%;width:100%;margin:auto;border-color:white" })
                        .DataSource(dataSource =>
                        {

                            dataSource.Read(read => read.Action("read_submited_ris_office", "Responsive"));
                            dataSource.PageSize(50);
                        }))

                            </div>
                        </section>
                        <br>
                        <br>

                        <br>
                        <br>
                        <br>
                    </div>
                </div>
            </div>
        </div>

         
        <div class="col-lg-6">
            <div class="col col-lg-12  ibox">
                <div class="ibox-title">
                    <h5> Approved RIS </h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up" ></i>
                        </a>
                    </div>
                </div>

                <div class="col ibox-content" style="display:block">
                    <div class="col row">

                        <section class="col col-lg-12 col-md-12 col-sm-12">
                            <label><input type="radio" id="a_office_search" onclick="acheck(1)" /> Search by Office </label>
                            <label><input type="radio" id="a_controller_search" onclick="acheck(2)" checked="checked" /> Search by Control # </label>
                            <input placeholder="Find Control #.." id="search_approved_ris" type="text" style="width:100%;height:25px">
                        </section>
                        
                        <section class="col col-lg-12 col-sm-12 col-md-12" style="margin-top:5px">
                     @(Html.Kendo().Grid<System.Data.DataRow>()
                    .Name("approve_grid")
                    .Columns(columns =>
                    {
                        columns.Bound("preparation_id").Hidden();
                        columns.Bound("officeid").Hidden();
                        columns.Bound("controlno").Title("Control #").Width(120);
                        columns.Bound("officename").Title("Office").Width(300);
                        columns.Bound("date_time").Title("Date").Width(50).ClientTemplate("#= kendo.toString(kendo.parseDate(date_time, 'yyyy-MM-dd h:mm tt'), 'MM/dd/yyyy h:mm tt') #");
                        columns.Bound("receive").Title("Status").Width(80).ClientTemplate("#if(receive == \"0\" )" +
                           "{#" +
                                "<button class=\"btn btn-xs btn-primary disabled\"> Waiting</button>" +
                           "#}" +
                           "else" +
                           "{#" +
                                "<button class=\"btn btn-xs btn-primary disabled\"> Received </button>" + 
                           "#}#"
                        );
                       
                    })
                                                              .Pageable()
                                                              .Navigatable()
                                                              .Selectable()
                                                              .HtmlAttributes(new { style = "width:100%;height:auto;overflow-x:scroll" })
                                                              .DataSource(dataSource => dataSource
                                                              .Ajax()
                                                              .AutoSync(true)
                                                              .ServerOperation(false)
                                                              .PageSize(20)
                                                              .Read(read => read.Action("listview_approved_ris", "Responsive"))
                                                              .Sort(a => a.Add("date_time").Descending()) 
                                                              )
                                                             .Events(events => events.Change("selectrow"))
                            )


                        </section>
                        <br>
                        <br>

                        <br>
                        <br>
                        <br>
                    </div>
                </div>
            </div>
        </div> 
      </div> 
</div>

<script>
   
    function approve() {

        var controlno = $('#cn').text();
    
        var grid = $("#prepared_ris").data("kendoGrid");

        // Get selected rows
        var sel = $("input:checked", grid.tbody).closest('tr');
        var items = [];
        $.each(sel, function (idx, row) {
            var item = grid.dataItem(row);
            var id = item.id;
            var itemid = item.itemid;
            var itemname = item.itemname;
            var rprice = item.rprice;
            var transcode = item.transcode;
            var unit = item.unit;
            var quantity = item.quantity;
            var officeid = item.officeid;
            
            items.push({id:id,officeid:officeid ,itemid: itemid, itemname: itemname,unit:unit,rprice:rprice,quantity:quantity,transcode:transcode})
        });

        if(items == "")
        {
            swal("Select Item!","", "error");
        }
        else
        {
            swal({ title: "Approve Request?", text: "", type: "warning", showCancelButton: true, confirmButtonColor: "#DD6B55", confirmButtonText: "Yes", showLoaderOnConfirm: true, closeOnConfirm: false }, function (isConfirm) {
                if (isConfirm) {

                    $.post("@Url.Content("~/Responsive/approve_request")", {items,controlno}, function (r) {
                        if(r == "1")
                        {  
                            $(".my_audio").trigger('play');
                            $(".sweet-overlay, .sweet-alert").remove();
                            swal("Approved!","", "success");
                            $("#prepared_ris").data("kendoGrid").dataSource.read({controlno:controlno});
                            // $("#ris").data("kendoGrid").dataSource.read();
                            $("#submitted_ris").data("kendoListView").dataSource.read();
                            //  $("#ListViewManual").data("kendoListView").dataSource.read();
                            $("#approve_grid").data("kendoGrid").dataSource.read();
                            $('#modal-form').modal('toggle');
                            var officeid = $('#of_id').text();
                            var code = "Approved";
                            $.post("@Url.Content("~/Responsive/Notify_SMS")", {noti_code:code,officeid:officeid,control_number:controlno}, function (r) {
                                if(r)
                                {
                                    
                                }
                                else
                                {

                                }
                            }) 
                            var url = "@Url.Action("count_approval", "Responsive")";
                            $.post(url, function (data) {
                              
                                $("#count").html(data);
                            })
                             
                        }
                        else
                        {
                            $(".sweet-overlay, .sweet-alert").remove();
                            swal("Opps ",r, "success");
                        }
                    })
                }

                    //swal("Loading", "done", "success"); $(".sweet-overlay, .sweet-alert").remove();
                else {
                    $(".sweet-overlay, .sweet-alert").remove();
                }
            });
        }
    }
   
    $(function () {
        $('#prepared_ris').on('click', '.chkbx', function () {
            var checked = $(this).is(':checked');
            var grid = $('#prepared_ris').data().kendoGrid;
            var dataItem = grid.dataItem($(this).closest('tr'));
            dataItem.set('stat_id', checked);
        })
    })

    function checkAll(ele) {

        var state = $(ele).is(':checked');
        var grid = $('#prepared_ris').data().kendoGrid;
        $.each(grid.dataSource.view(), function () {
            if (this['stat_id'] != state)
                this.dirty = true;
            this['stat_id'] = state;
        });
        grid.refresh();
    }
    function view_approved(e)
    {
        //alert('approve items')
        
        document.getElementById("control_to_print").value = e;
        $('#modal-approved').modal('toggle');
        $('#approved_items').data('kendoGrid').dataSource.read({controlno:e})
    }
    function mark_released(e) {
        
        swal({ title: "Mark as Released?", text: "", type: "warning", showCancelButton: true, confirmButtonColor: "#DD6B55", confirmButtonText: "Yes", showLoaderOnConfirm: true, closeOnConfirm: false }, function (isConfirm) {
            if (isConfirm) {

                $.post("@Url.Content("~/Responsive/mark_released")", {e}, function (r) {
                    if(r == "1")
                    {  $(".my_audio").trigger('play');
                        $(".sweet-overlay, .sweet-alert").remove();
                        swal("Marked!","", "success");
                        // $("#ris").data("kendoGrid").dataSource.read();
                        $("#ListViewManual").data("kendoListView").dataSource.read();
                    }
                    else
                    {
                        $(".sweet-overlay, .sweet-alert").remove();
                        swal("Opps ",r, "success");
                    }
                })
            }

                //swal("Loading", "done", "success"); $(".sweet-overlay, .sweet-alert").remove();
            else {
                $(".sweet-overlay, .sweet-alert").remove();
            }
        });
    }
    function show_submitted_items(controlno,officeid) {
        //var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
        //var controlno = dataItem.controlno;
        //var officeid = dataItem.officeid;
         
        $.get("@Url.Content("~/Responsive/check_if_edited")", {"controlno":controlno,"officeid":officeid}, function (data) { 
            if(data[0].agree)
            { 
                $('#appbtn').show(); 
                $('#consentbtn').hide();
                $('#controlno_print').show();  
            }
           else
            { 
                if(data[0].edited == false && data[0].agree == false && data[0].deleted == false)
                {
                    $('#appbtn').show(); 
                    $('#consentbtn').hide();
                    $('#controlno_print').show();  
                }
                else
                {
                    $('#appbtn').hide(); 
                    $('#consentbtn').show();
                    $('#controlno_print').hide();  
                }
            }
        })
         

        $('#cn').text(controlno);
        $('#of_id').text(officeid);
        $('#prepared_ris').data('kendoGrid').dataSource.read({ controlno: controlno })
       // $('#office_items').data('kendoGrid').dataSource.read({ officeid: officeid })

        $('#modal-form').modal('toggle');
    }
    function remove_ris(controlno,officeid) {
        swal({ title: "Remove this preparation and it's item Request ?", text: "", type: "warning", showCancelButton: true, confirmButtonColor: "#DD6B55", confirmButtonText: "Yes", showLoaderOnConfirm: true, closeOnConfirm: false }, function (isConfirm) {
            if (isConfirm) {

                $.post("@Url.Content("~/Responsive/remove_ris")", {controlno,officeid}, function (r) {
                    if(r == "1")
                    {  $(".my_audio").trigger('play');
                        $(".sweet-overlay, .sweet-alert").remove();
                        swal("Removed!","", "success");
                     // $("#ris").data("kendoGrid").dataSource.read();
                        $("#submitted_ris").data("kendoListView").dataSource.read();
                    }
                    else
                    {
                        $(".sweet-overlay, .sweet-alert").remove();
                        swal("Opps ",r, "success");
                    }
                })
            }

                //swal("Loading", "done", "success"); $(".sweet-overlay, .sweet-alert").remove();
            else {
                $(".sweet-overlay, .sweet-alert").remove();
            }
        });
    }
</script>

<div id="modal-form" class="modal fade" aria-hidden="true">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-body">
                <div class="row">
                        <div class="col-lg-12 col-sm-12 col-md-12">
                         
                            <button id="appbtn" class="btn btn-sm btn-primary" onclick="approve()"><strong>Approve</strong></button>
                             
                            <button id="consentbtn" class="btn btn-sm btn-danger"><strong>Waiting for Approval</strong></button>
                            <button id="controlno_print" class="btn btn-info btn-sm" type="button" onclick="print()"><i class="fa fa-print"></i>&nbsp;Print</button>
                            <br>
                            <h3 id="cn"> </h3>
                            <p id="of_id" style="visibility:hidden"></p>
                            <br>
                        </div> 
                </div>
                <div class="row">

                <div class="col-lg-12 col-md-12 col-sm-12">
                    @(Html.Kendo().Grid<IMS.Models.item>()
                    .Name("prepared_ris")
                    .Columns(columns =>
                    {
                        columns.Bound("id").Hidden();
                        columns.Bound("officeid").Hidden();
                        columns.Bound("itemid").Title("itemid").Hidden();
                        columns.Bound("controlno").Title("controlno").Hidden();
                        columns.Bound("to_be_deleted").Title("").Hidden();
                        columns.Template(@<text></text>).ClientTemplate("<input type='checkbox' #= stat_id ? checked='checked':'' # class='chkbx' />")
                        .HeaderTemplate("<input type='checkbox' id='masterCheckBox' class='masterCheckBox' onclick='checkAll(this)' />").Width(50);
                        columns.Bound("itemname").Title("Item Name").Width(300);
                        columns.Bound("rprice").Title("Price").Width(80).Format("{0:N}");
                        columns.Bound("quantity").Title("Quantity").Width(120).Format("{0:N}");
                        columns.Bound("total").Title("Total").Width(80).Format("{0:N}");
                        columns.Bound("unit").Title("Unit").Width(80);
                        columns.Bound("transcode").Title("Transcode").Width(80);
                        columns.Command(command => { command.Edit(); command.Destroy(); command.Custom("Undo").Click("return_deleted"); }).Width(200);
                    })
                                                          .Pageable()
                            //.Selectable()
                                                          .Editable(editable => editable.Mode(GridEditMode.InLine))

                                                          .HtmlAttributes(new { style = "width:100%;height:auto;overflow-x:scroll" })
                                                          .DataSource(dataSource => dataSource
                                                          .Ajax()
                                                          .Sort(a=>a.Add("itemname").Ascending())
                                                          .ServerOperation(false)
                                                          .Model(model =>
                                                                                     {
                                                                                         model.Id(p => p.id);
                                                                                         model.Field(p => p.controlno).Editable(false);
                                                                                         model.Field(p => p.itemname).Editable(false);
                                                                                         model.Field(p => p.itemid).Editable(false);
                                                                                         model.Field(p => p.officename).Editable(false);
                                                                                         model.Field(p => p.unit).Editable(false);
                                                                                         model.Field(p => p.quantity).Editable(true);
                                                                                         model.Field(p => p.transcode).Editable(false);
                                                                                         model.Field(p => p.rprice).Editable(false);
                                                                                         model.Field(p => p.total).Editable(false);
                                                                                     })
                                                                  .PageSize(10000)
                                                                  .Read(read => read.Action("get_items_by_ris_code", "Responsive"))
                                                                  .Update(update => update.Action("update_ris", "Responsive"))
                                                                  .Destroy(destroy => destroy.Action("destroy_ris", "Responsive"))
                                                                  .Events(e => e.RequestEnd("onRequestEnd"))
                                                                  )
                                                                  .Events(e => e.DataBound("check_to_be_deleted"))
                    )
                </div>
                @*<div class="col-sm-4  col-md-4 col-lg-4">
                    @(Html.Kendo().Grid<IMS.Models.item>()
                    .Name("office_items")
                    .Columns(columns =>
                    {
                        columns.Bound("itemid").Hidden();
                        columns.Bound("itemname").Title("Item Name").Width(250);
                        columns.Bound("unit").Title("Unit").Width(100);
                        columns.Bound("quantity").Title("Remaining").Width(100);
                    })
                                                  .Pageable()
                                                  .Navigatable()
                                                  .Selectable()
                                                  .HtmlAttributes(new { style = "width:100%;height:auto;overflow-x:scroll" })
                                                  .DataSource(dataSource => dataSource
                                                  .Ajax()
                                                  .AutoSync(true)
                                                  .ServerOperation(false)
                                                  .PageSize(10000)
                                                            .Model(model =>
                                                            {
                                                                model.Id("itemid");
                                                            })
                                                  .Read(read => read.Action("get_items_office", "Responsive"))
                                                  .Sort(a => a.Add("itemname").Ascending())
                                                  )
                    )
                </div>*@
            
                </div>
           </div>
        </div>
    </div>
</div>

<div id="modal-approved" class="modal fade" aria-hidden="true">
    <div class="modal-dialog" style="width:90%">
        <div class="modal-content">
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-6 col-sm-6 col-md-6">
                        <h2> Approved Items</h2>
                    </div>
                </div>
                <div class="row">

                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <input type="text" id="control_to_print" style="visibility:hidden"/>
                        <button   class="btn btn-sm btn-danger pull-right" onclick="print_this_shit()"><strong>Print</strong></button>

                        <button class="btn btn-sm btn-primary pull-right" style="margin-right:20px" onclick="return_request()" ><strong>Return</strong></button>
                        <br>
                        <br>
                        <br />
                        </div>


                        <div class="col-lg-12 col-md-12 col-sm-12">

                            @(Html.Kendo().Grid<System.Data.DataRow>()
                    .Name("approved_items")
                    .Columns(columns =>
                    {
                        columns.Bound("id").Hidden();
                        columns.Bound("officeid").Hidden();
                        columns.Bound("itemid").Title("itemid").Hidden();
                        columns.Bound("itemname").Title("Item Name").Width(300);
                        columns.Bound("price").Title("Price").Width(80).Format("{0:N}");
                        columns.Bound("quantity").Title("Quantity").Width(80).Format("{0:N}");
                        columns.Bound("unit").Title("Unit").Width(80);
                        columns.Bound("trans_code").Title("Transcode").Width(80);
                    })
                                                                      .Pageable()
                                    //.Selectable()

                                                                      .HtmlAttributes(new { style = "width:100%;height:auto;overflow-x:scroll" })
                                                                      .DataSource(dataSource => dataSource
                                                                      .Ajax()
                                                                      .ServerOperation(false)
                                                                              .PageSize(10000)
                                                                       .Read(read => read.Action("get_approved_items", "Responsive"))
                                                                             )
                            )
                        </div>

                    </div>
            </div>
        </div>
    </div>
</div>

<script>   
    function print_this_shit() {
        var control = $('#control_to_print').val();
        
        window.open("@Url.Content("~/Reports/print_ris.aspx?repID=")" + 3 + "&controlno=" + control);
        
    }
    function return_request() {
        var ris_number = $('#control_to_print').val();
         
        swal({ title: "Return this preparation and it's item Request ?", text: "", type: "warning", showCancelButton: true, confirmButtonColor: "#DD6B55", confirmButtonText: "Yes", showLoaderOnConfirm: true, closeOnConfirm: false }, function (isConfirm) {
            if (isConfirm) { 
                $.post("@Url.Content("~/Responsive/return_request")", {ris_number}, function (r) {
                    if(r == "1")
                    {  $(".my_audio").trigger('play');
                        $(".sweet-overlay, .sweet-alert").remove();
                        swal("Returned!","", "success");
                        // $("#ris").data("kendoGrid").dataSource.read();
                        $("#submitted_ris").data("kendoListView").dataSource.read();
                        $("#approved_items").data("kendoGrid").dataSource.read();
                        $("#approve_grid").data("kendoGrid").dataSource.read();
                    }
                    else
                    {
                        $(".sweet-overlay, .sweet-alert").remove();
                        swal("Opps ",r, "success");
                    }
                })
            }

                //swal("Loading", "done", "success"); $(".sweet-overlay, .sweet-alert").remove();
            else {
                $(".sweet-overlay, .sweet-alert").remove();
            }
        });
    }





    $(document).ready(function () {
        $("#search_approved_ris").on("keyup", (function () {
            var value = $(this).val();
            grid = $("#approve_grid").data("kendoGrid");
            var orfilter = { logic: "or", filters: [] };
            if (value) {
                if(document.getElementById('a_office_search').checked) {
                    grid.dataSource.filter({ field: "officename", operator: "contains", value: value });
                    orfilter.filters.push({ field: "officename", operator: "contains", value: value })
                    grid.dataSource.filter(orfilter);
                }
                else if(document.getElementById('a_controller_search').checked) 
                {
                    grid.dataSource.filter({ field: "controlno", operator: "contains", value: value });
                    orfilter.filters.push({ field: "controlno", operator: "contains", value: value })
                    grid.dataSource.filter(orfilter);
                } 
            } else {
                grid.dataSource.filter({});
            }
        }));

        $("#search_submitted_ris").on("keyup", (function () {
            var value = $(this).val();
            grid = $("#submitted_ris").data("kendoListView");
            var orfilter = { logic: "or", filters: [] };
            if (value) {
                
                if(document.getElementById('office_search').checked) {
                    grid.dataSource.filter({ field: "officename", operator: "contains", value: value });
                    orfilter.filters.push({ field: "officename", operator: "contains", value: value })
                    grid.dataSource.filter(orfilter);
                }
                else if(document.getElementById('controller_search').checked) 
                {
                    grid.dataSource.filter({ field: "controlno", operator: "contains", value: value });
                    orfilter.filters.push({ field: "controlno", operator: "contains", value: value })
                    grid.dataSource.filter(orfilter);
                } 
            }
            else {
                grid.dataSource.filter({});
            }
        })); 
    })
 </script>

<style>
    .lv {
        float: left;
        position: relative;
        width: 150px;
        height: 170px;
        margin: 0 5px;
        padding: 0;
    }
    .deleted {
        background-color:#808080;
        color:white
    }
.k-grid {
    font-size: 12px;
}
.k-grid td {
    line-height: 2em;
}
</style>

 
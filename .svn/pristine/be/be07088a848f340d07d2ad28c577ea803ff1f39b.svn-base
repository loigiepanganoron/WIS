@model IEnumerable<IMS.Models.transaction>
@using IMS.Models;
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script>
    function rptView() {
        $.get("@Url.Content("~/Home/_reportView")", function (r) {
            $("#reportWindow").html(r)
            $("#reportWindow").data("kendoWindow").center().open()
        })
    };
</script>



<div id="noise" style="width:200px;height:40px;float:left;padding-top:5px;border-bottom-right-radius:25px;"><label style="color:white;font-size:15px;text-align:center"> Transactions</label></div>
<div style="width:100%;height:auto;">
    @*<div id="noise" style="width:100%;height:50px;font-size:25px;text-align:center;color:white;padding-top:5px"></div>*@
    <div style="width:99%;height:auto;padding:30px;position:center;">
        
        <div style="width:25%;">
            <button id="button" onclick="rptView()" class="k-primary fill" style="width:100px">Reports</button>
        </div>
        <div id="noise" class="myheader">History</div>
        <span id="EmpSearch" class="k-textbox k-space-right " style="width:100%">
            <input placeholder="Search Employee Transactions..." id="filter2" class="k-input autoselect" type="text" style="width:100%;font-family:Arial; font-size:14px "><a href="#" class="k-icon k-i-search" style="margin-top:-10px">&nbsp;</a>
        </span>


        @(Html.Kendo().Grid<dynamic>()
            .Name("stock")
            .Columns(columns =>
            {
                columns.Bound("itemid").Width(100).Title("ID").Hidden();
                columns.Bound("stockdate").Width(100).Title("Stock Date").ClientTemplate("#= stockdate? kendo.toString(kendo.parseDate(stockdate), 'MMM d, yyyy h:mm tt') : '' #");
                columns.Bound("eName").Width(150).Title("Employee Name");
                columns.Bound("itemName").Width(200).Title("Item Name");
                columns.Bound("qty").Width(60).Title("Quantity");
                columns.Bound("int_out").Width(50).Title("In/Out");
            })

            .Pageable()
            .Navigatable()
            //.Scrollable()
            .Selectable()
            .HtmlAttributes(new { style = "height:auto" })
            .DataSource(dataSource => dataSource
                .Ajax()
                .ServerOperation(false)
                .PageSize(20)
                .Read(read => read.Action("menuList", "Home"))
                .Sort(a => a.Add("stockdate").Descending())
            )
        )
    </div>
</div>

<script>  

    $(document).ready(function () {
        $("#filter2").on("keyup", (function () {
            var value = $(this).val();
            grid = $("#stock").data("kendoGrid");
            var orfilter = { logic: "or", filters: [] };
            if (value) {
                grid.dataSource.filter({ field: "eName", operator: "contains", value: value });
                orfilter.filters.push({ field: "eName", operator: "contains", value: value })
                grid.dataSource.filter(orfilter);
            } else {
                grid.dataSource.filter({});
            }
        }));
    });
  </script>





@(Html.Kendo().Window()
    .Name("reportWindow")
    .Draggable()
    .Title("Reports")
    .HtmlAttributes(new { style = "width:400px;height:400px" })
    .Modal(true)
    .Visible(!ViewData.ModelState.IsValid)
)
